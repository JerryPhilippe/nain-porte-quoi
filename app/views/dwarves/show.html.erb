<div class="container">
  <div class="flex-elements">
    <div class="dwarf-card p-2 m-2">
      <h1><%= @dwarf.name %> | <%= @dwarf.age %></h1>
      <%  if @dwarf.photo.attached?  %>
        <%= cl_image_tag @dwarf.photo.key, height: 300, crop: :fill %>
      <% end %>
      <p class="mt-3"><%= @dwarf.description %></p>
    </div>
    <div>


      <% if user_signed_in? %>
        <% if @dwarf.user != current_user %>
          <div id="rental-form">
            <%= simple_form_for [@dwarf, @rental] do |f| %>
              <%= f.input :rental_begin,
                          as: :string,
                          label: "dates de Réservation",
                          input_html: { data: { controller: "datepicker", datepicker_reserved_dates_value: @reserved }} %>
              <%= f.submit "Réserver ce nain", class:"submit-button"%>
            <% end %>
          </div>
          <div class="mt-4" style="width: 100%; height: 350px;"
          data-controller="map"
          data-map-markers-value="<%= @markers.to_json %>"
          data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
          <% else %>
          <div class="mt-4" style="width: 400px; height: 450px;"
        data-controller="map"
        data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
        <% end %>
        <% else %>
        <div id="log-ask">
          <%= link_to "Connectez-vous", new_user_session_path, class:"ask-log-button" %>
          <p>ou</p>
          <%= link_to "inscrivez-vous", new_user_registration_path, class:"ask-log-button" %>
          <p>pour réserver</p>
        </div>
          <div class="mt-4" style="width: 100%; height: 350px;"
          data-controller="map"
          data-map-markers-value="<%= @markers.to_json %>"
          data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
      <% end %>
  </div>
</div>
